{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.local/ids/config.schema.json",
  "$comment": "IDS â€” Player Config Schema (shared/contract/schema/config.schema.json)\n\nPURPOSE\n  This JSON Schema defines what a valid 'player config' looks like.\n  It is the shared contract between:\n    - admin (control plane): produces configs\n    - player (runtime): consumes configs\n\nWHY THIS EXISTS\n  The player must never rely on 'best effort' parsing of configs.\n  If configs are wrong, the system becomes unpredictable (wrong content shown, crashes, undefined behavior).\n  This schema makes the config format explicit, testable, and enforceable in CI.\n\nWHAT THIS SCHEMA DESCRIBES\n  A config represents one campaign with metadata and an ordered list of items to render.\n  Minimal core fields:\n    - campaignId, campaignName, campaignPriority\n    - generatedAt (date-time)\n    - items[] (playlist entries with duration and order)\n\nINPUT / OUTPUT\n  Input: JSON produced by admin or demo examples.\n  Output: Validation success/failure via AJV (see scripts/validate-config.js).\n\nBOUNDARIES\n  This schema describes structure and basic constraints only.\n  It does NOT describe runtime behavior (preemption rules, timeout policies, event routing).\n  Those behaviors belong in player logic and higher-level docs.\n\nEVOLUTION RULES (IMPORTANT)\n  - Changes to this file are breaking changes unless examples and player/admin are updated together.\n  - Every schema update must come with:\n      1) updated examples in shared/contract/examples/\n      2) passing `make validate`\n      3) a short note in docs/decisions/ or docs/architecture/ if it changes semantics.\n",
  "title": "IDS Player Config",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "campaignId",
    "campaignName",
    "campaignPriority",
    "generatedAt",
    "items"
  ],
  "properties": {
    "campaignId": {
      "type": "string",
      "minLength": 1
    },
    "campaignName": {
      "type": "string",
      "minLength": 1
    },
    "campaignPriority": {
      "type": "integer"
    },
    "generatedAt": {
      "type": "string",
      "format": "date-time"
    },
    "items": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "contentId",
          "type",
          "data",
          "durationSec",
          "order"
        ],
        "properties": {
          "contentId": {
            "type": "string",
            "minLength": 1
          },
          "type": {
            "type": "string",
            "enum": [
              "TEXT",
              "IMAGE",
              "VIDEO"
            ]
          },
          "data": {
            "type": "string"
          },
          "durationSec": {
            "type": "integer",
            "minimum": 1
          },
          "order": {
            "type": "integer",
            "minimum": 1
          }
        }
      }
    }
  }
}